(this["webpackJsonpbusiness-violations"]=this["webpackJsonpbusiness-violations"]||[]).push([[0],{17:function(e,t,a){e.exports=a(65)},22:function(e,t,a){},45:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(5),c=a.n(s),o=(a(22),a(2)),l=a.n(o),i=a(3),u=a(4),d=a(16),m=a(14),v=a.n(m),p=(a(45),new RegExp('/style="[a-zA-Z0-9:;.s()-,]*"/gi')),f=function(e){var t=e.address,a=e.caseId,s=e.caseStatus,c=e.isActive,o=void 0!==c&&c,d=e.lat,m=e.lng,v=e.onClick,f=void 0===v?function(){}:v,g=e.onClose,E=void 0===g?function(){}:g,h=Object(n.useState)(""),b=Object(u.a)(h,2),w=b[0],N=b[1],k=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://kc-covid-violations-api.herokuapp.com/api/".concat(a));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",Object.assign({onClick:Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f(),w){e.next=7;break}return e.t0=N,e.next=5,k();case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}}),e)}))),className:"Marker ".concat(o?"Active":""," ").concat("RESOL"===s?"Resolved":"")},{lat:d,lng:m}),o&&r.a.createElement("div",{className:"Marker-Text"},r.a.createElement("h1",{className:"Marker-Address"},"Address ",r.a.createElement("span",{className:"Marker-Close",onClick:function(e){e.stopPropagation(),E()}},"X")),r.a.createElement("p",null,t),!w&&r.a.createElement("p",null,"Fetching Data..."),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:w.replace(p,"")}})))},g=a(15),E=a.n(g),h={lat:39.093349,lng:-94.580345},b=function(e){var t=e.status,a=e.date,n="creation_date > '".concat(a.toISOString().substring(0,19),"'");return"ALL"!==t&&(n+=" AND status='".concat(t,"'")),n},w=new Date,N=function(){var e,t=Object(n.useState)(""),a=Object(u.a)(t,2),s=a[0],c=a[1],o=Object(n.useState)({status:"OPEN",date:new Date(w.getFullYear(),w.getMonth()-1,w.getDate())}),m=Object(u.a)(o,2),p=m[0],g=m[1],N=Object(d.a)("violations",Object(i.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://data.kcmo.org/resource/ti6s-47nz.geojson?$where=".concat(b(p)));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))),k=N.isFetching,O=N.data,S=N.refetch;return r.a.createElement("div",{style:{height:"100vh",width:"100%"}},r.a.createElement("div",{className:"Navigation"},r.a.createElement("h1",{className:"Navigation-Header"},"KC Covid Violations"),r.a.createElement("hr",{className:"Navigation-Divider"}),k&&r.a.createElement("div",{className:"Loading-Container"},r.a.createElement(E.a,{type:"Puff",color:"#666",height:25,width:25})),!k&&r.a.createElement("form",{className:"Query-Form",onSubmit:function(e){e.preventDefault(),S()}},r.a.createElement("label",{htmlFor:"status"},"Case Status:"),r.a.createElement("span",{className:"form-spacer-1"}),r.a.createElement("select",{id:"status",value:p.status,onChange:function(e){var t=Object.assign({},p);t.status=e.currentTarget.value,g(t)}},r.a.createElement("option",{value:"ALL"},"All"),r.a.createElement("option",{value:"OPEN"},"Open"),r.a.createElement("option",{value:"RESOL"},"Resolved")),r.a.createElement("span",{className:"form-spacer-2"}),r.a.createElement("label",{htmlFor:"date"},"Start Date:"),r.a.createElement("span",{className:"form-spacer-1"}),r.a.createElement("input",{name:"date",type:"date",value:(e=p.date,e.toISOString().substring(0,10)),onChange:function(e){var t=Object.assign({},p);t.date=new Date(e.currentTarget.value),g(t)}}),r.a.createElement("span",{className:"form-spacer-1"}),r.a.createElement("input",{type:"submit",value:"Search"}),r.a.createElement("div",{className:"Legend"},r.a.createElement("span",null,"Open"),r.a.createElement("span",{className:"Marker-Legend"}),r.a.createElement("span",{className:"form-spacer-1"}),r.a.createElement("span",null,"Resolved"),r.a.createElement("span",{className:"Marker-Legend Resolved"})))),r.a.createElement(v.a,{bootstrapURLKeys:{key:"AIzaSyBSRItjUte9j61pdvxwwVHKeY72fbACnZY"},defaultCenter:h,defaultZoom:14},!k&&(null===O||void 0===O?void 0:O.features.map((function(e){var t,a,n,o;return r.a.createElement(f,{address:null===e||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.street_address,caseId:null===e||void 0===e||null===(a=e.properties)||void 0===a?void 0:a.case_id,caseStatus:null===e||void 0===e||null===(n=e.properties)||void 0===n?void 0:n.status,onClick:function(){var t;c((null===e||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.case_id)||"")},onClose:function(){c("")},isActive:s===(null===e||void 0===e||null===(o=e.properties)||void 0===o?void 0:o.case_id),lat:e.geometry.coordinates[1],lng:e.geometry.coordinates[0]})})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.ad8056f4.chunk.js.map