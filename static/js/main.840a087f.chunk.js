(this["webpackJsonpbusiness-violations"]=this["webpackJsonpbusiness-violations"]||[]).push([[0],{17:function(e,t,a){e.exports=a(65)},22:function(e,t,a){},45:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(5),c=a.n(s),o=(a(22),a(2)),i=a.n(o),l=a(4),u=a(3),d=a(16),m=a(14),v=a.n(m),p=(a(45),new RegExp(/width:\s\d*px;/g)),g=function(e){var t=e.address,a=e.caseId,s=e.caseStatus,c=e.isActive,o=void 0!==c&&c,d=e.lat,m=e.lng,v=e.onClick,g=void 0===v?function(){}:v,f=e.onClose,E=void 0===f?function(){}:f,h=Object(n.useState)(""),b=Object(u.a)(h,2),k=b[0],w=b[1],N=function(){var e=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://kc-covid-violations-api.herokuapp.com/api/".concat(a));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",Object.assign({onClick:Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g(),k){e.next=7;break}return e.t0=w,e.next=5,N();case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}}),e)}))),className:"Marker ".concat(o?"Active":""," ").concat("RESOL"===s?"Resolved":"")},{lat:d,lng:m}),o&&r.a.createElement("div",{className:"Marker-Text"},r.a.createElement("h1",{className:"Marker-Address"},"Address ",r.a.createElement("span",{className:"Marker-Close",onClick:function(e){e.stopPropagation(),E()}},"X")),r.a.createElement("p",null,t),!k&&r.a.createElement("p",null,"Fetching Data..."),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:k.replace(p,"")}})))},f=a(15),E=a.n(f),h={lat:39.093349,lng:-94.580345},b=function(e){var t=e.status,a=e.date,n="creation_date > '".concat(a.toISOString().substring(0,19),"'");return"ALL"!==t&&(n+=" AND status='".concat(t,"'")),n},k=new Date,w=function(){var e,t=Object(n.useState)(!0),a=Object(u.a)(t,2),s=a[0],c=a[1],o=Object(n.useState)(""),m=Object(u.a)(o,2),p=m[0],f=m[1],w=Object(n.useState)({status:"OPEN",date:new Date(k.getFullYear(),k.getMonth()-1,k.getDate())}),N=Object(u.a)(w,2),O=N[0],j=N[1],S=Object(d.a)("violations",Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://data.kcmo.org/resource/ti6s-47nz.geojson?$where=".concat(b(O)));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))),C=S.isFetching,y=S.data,x=S.refetch;return r.a.createElement("div",{style:{height:"100vh",width:"100%"}},r.a.createElement("div",{className:"Navigation"},r.a.createElement("h1",{className:"Navigation-Header"},"KCMO Covid Violations"),r.a.createElement("hr",{className:"Navigation-Divider"}),r.a.createElement("p",{onClick:function(){return c(!s)},className:"Trigger-Filters"},"".concat(s?"Hide Filters":"Display Filters")),C&&r.a.createElement("div",{className:"Loading-Container"},r.a.createElement(E.a,{type:"Puff",color:"#666",height:25,width:25})),!C&&r.a.createElement("form",{className:"Query-Form",onSubmit:function(e){e.preventDefault(),x()}},r.a.createElement("div",{className:"Input-Elements ".concat(s?"":"Hide")},r.a.createElement("div",{className:"Input-Group"},r.a.createElement("label",{htmlFor:"status"},"Case Status:"),r.a.createElement("select",{id:"status",value:O.status,onChange:function(e){var t=Object.assign({},O);t.status=e.currentTarget.value,j(t)}},r.a.createElement("option",{value:"ALL"},"All"),r.a.createElement("option",{value:"OPEN"},"Open"),r.a.createElement("option",{value:"RESOL"},"Resolved"))),r.a.createElement("div",{className:"Input-Group"},r.a.createElement("label",{htmlFor:"date"},"Start Date:"),r.a.createElement("input",{name:"date",type:"date",value:(e=O.date,e.toISOString().substring(0,10)),onChange:function(e){var t=Object.assign({},O);t.date=new Date(e.currentTarget.value),j(t)}})),r.a.createElement("div",{className:"Input-Group"},r.a.createElement("input",{type:"submit",value:"Search"}))),r.a.createElement("div",{className:"Legend"},r.a.createElement("span",null,"Open"),r.a.createElement("span",{className:"Marker-Legend"}),r.a.createElement("span",{className:"form-spacer-1"}),r.a.createElement("span",null,"Resolved"),r.a.createElement("span",{className:"Marker-Legend Resolved"})))),r.a.createElement(v.a,{options:{clickableIcons:!1,draggableCursor:"default"},bootstrapURLKeys:{key:"AIzaSyBSRItjUte9j61pdvxwwVHKeY72fbACnZY"},defaultCenter:h,defaultZoom:14},!C&&(null===y||void 0===y?void 0:y.features.map((function(e){var t,a,n,s;return r.a.createElement(g,{address:null===e||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.street_address,caseId:null===e||void 0===e||null===(a=e.properties)||void 0===a?void 0:a.case_id,caseStatus:null===e||void 0===e||null===(n=e.properties)||void 0===n?void 0:n.status,onClick:function(){var t;f((null===e||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.case_id)||"")},onClose:function(){f("")},isActive:p===(null===e||void 0===e||null===(s=e.properties)||void 0===s?void 0:s.case_id),lat:e.geometry.coordinates[1],lng:e.geometry.coordinates[0]})})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.840a087f.chunk.js.map